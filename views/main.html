Shoxruz 2, [9/11/2025 1:46 PM]
<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ToshkentUy - Ko'chmas Mulk Platformasi</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #2563eb;
            --secondary-color: #f8fafc;
            --accent-color: #10b981;
            --text-dark: #1e293b;
            --text-light: #64748b;
            --border-color: #e2e8f0;
            --error-color: #ef4444;
            --success-color: #10b981;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-dark);
            background-color: #f8fafc;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        header {
            background: white;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--primary-color);
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--text-dark);
            font-weight: 500;
            transition: color 0.3s;
        }

        .nav-links a:hover {
            color: var(--primary-color);
        }

        .auth-buttons {
            display: flex;
            gap: 1rem;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 0.5rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .btn-primary {
            background: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background: #1d4ed8;
            transform: translateY(-2px);
        }

        .btn-outline {
            border: 2px solid var(--primary-color);
            color: var(--primary-color);
            background: transparent;
        }

        .btn-outline:hover {
            background: var(--primary-color);
            color: white;
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(135deg, var(--primary-color), #3b82f6);
            color: white;
            padding: 4rem 0;
            text-align: center;
        }

        .hero h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .hero p {
            font-size: 1.2rem;
            margin-bottom: 2rem;
            opacity: 0.9;
        }

        /* Search Section */
        .search-section {
            background: white;
            padding: 3rem 0;
            border-bottom: 1px solid var(--border-color);
        }

        .search-form {
            background: white;
            border-radius: 1rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            padding: 2rem;
            max-width: 900px;
            margin: 0 auto;
        }

        .search-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            font-weight: 500;
            margin-bottom: 0.5rem;
            color: var(--text-dark);
        }


.form-control {
            padding: 0.75rem;
            border: 2px solid var(--border-color);
            border-radius: 0.5rem;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        /* Listings Grid */
        .listings-section {
            padding: 4rem 0;
        }

        .section-title {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 3rem;
            color: var(--text-dark);
        }

        .listings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .listing-card {
            background: white;
            border-radius: 1rem;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
        }

        .listing-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
        }

        .listing-image {
            width: 100%;
            height: 200px;
            background-size: cover;
            background-position: center;
            position: relative;
        }

        .listing-price {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: var(--primary-color);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 2rem;
            font-weight: bold;
        }

        .listing-content {
            padding: 1.5rem;
        }

        .listing-title {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .listing-location {
            color: var(--text-light);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .listing-details {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1rem;
            color: var(--text-light);
        }

        .listing-agent {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding-top: 1rem;
            border-top: 1px solid var(--border-color);
        }

        .agent-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--primary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
        }

        .modal-content {
            background-color: white;
            margin: 2% auto;
            padding: 0;
            border-radius: 1rem;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: bold;
        }

        .close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-light);
        }

        .modal-body {
            padding: 1.5rem;
        }

        /* User Dashboard */
        .dashboard {
            display: none;
            padding: 2rem 0;
        }

.dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }

        .dashboard-nav {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .nav-tab {
            padding: 0.75rem 1.5rem;
            border: none;
            background: var(--secondary-color);
            border-radius: 0.5rem;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
        }

        .nav-tab.active {
            background: var(--primary-color);
            color: white;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }

            .hero h1 {
                font-size: 2rem;
            }

            .search-row {
                grid-template-columns: 1fr;
            }

            .listings-grid {
                grid-template-columns: 1fr;
            }

            .dashboard-header {
                flex-direction: column;
                gap: 1rem;
            }

            .dashboard-nav {
                flex-wrap: wrap;
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.6s ease-out;
        }

        /* Additional styles for forms */
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }

        .textarea {
            min-height: 100px;
            resize: vertical;
        }

        .file-input {
            border: 2px dashed var(--border-color);
            padding: 2rem;
            text-align: center;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .file-input:hover {
            border-color: var(--primary-color);
            background-color: #f0f9ff;
        }

        .success-message, .error-message {
            padding: 1rem;
            border-radius: 0.5rem;
            margin-bottom: 1rem;
        }

        .success-message {
            background-color: #dcfce7;
            color: #166534;
            border: 1px solid #bbf7d0;
        }

        .error-message {
            background-color: #fef2f2;
            color: #dc2626;
            border: 1px solid #fecaca;
        }

        /* Statistics */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: white;
            padding: 1.5rem;
            border-radius: 0.5rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-color);
        }

.stat-label {
            color: var(--text-light);
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">ToshkentUy</div>
                <nav>
                    <ul class="nav-links">
                        <li><a href="#" onclick="showSection('home')">Bosh sahifa</a></li>
                        <li><a href="#" onclick="showSection('search')">Qidiruv</a></li>
                        <li><a href="#" onclick="showSection('about')">Biz haqimizda</a></li>
                    </ul>
                </nav>
                <div class="auth-buttons">
                    <button class="btn btn-outline" onclick="openModal('loginModal')">Kirish</button>
                    <button class="btn btn-primary" onclick="openModal('registerModal')">Ro'yxatdan o'tish</button>
                </div>
            </div>
        </div>
    </header>

    <!-- Home Section -->
    <section id="homeSection" class="main-section">
        <!-- Hero -->
        <div class="hero">
            <div class="container">
                <h1>Toshkentdagi eng yaxshi ko'chmas mulkni toping</h1>
                <p>Minglab kvartira, uy va tijorat ob'ektlari orasidan o'zingizga mosini tanlang</p>
            </div>
        </div>

        <!-- Search Section -->
        <div class="search-section">
            <div class="container">
                <div class="search-form">
                    <h2 style="text-align: center; margin-bottom: 2rem;">Qidiruv</h2>
                    <div class="search-row">
                        <div class="form-group">
                            <label>Mulk turi</label>
                            <select class="form-control" id="propertyType">
                                <option value="">Tanlang</option>
                                <option value="apartment">Kvartira</option>
                                <option value="house">Uy</option>
                                <option value="commercial">Tijorat</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Tuman</label>
                            <select class="form-control" id="district">
                                <option value="">Tanlang</option>
                                <option value="yunusobod">Yunusobod</option>
                                <option value="chilonzor">Chilonzor</option>
                                <option value="shayxontoxur">Shayxontoxur</option>
                                <option value="mirzo-ulugbek">Mirzo Ulug'bek</option>
                                <option value="sergeli">Sergeli</option>
                                <option value="yakkasaroy">Yakkasaroy</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Xonalar soni</label>
                            <select class="form-control" id="rooms">
                                <option value="">Tanlang</option>
                                <option value="1">1 xona</option>
                                <option value="2">2 xona</option>
                                <option value="3">3 xona</option>
                                <option value="4">4+ xona</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Narx (mln so'm)</label>
                            <input type="number" class="form-control" id="maxPrice" placeholder="Maksimal narx">
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="searchProperties()" style="width: 100%;">Qidirish</button>
                </div>
            </div>
        </div>

Shoxruz 2, [9/11/2025 1:46 PM]
<!-- Listings -->
        <div class="listings-section">
            <div class="container">
                <h2 class="section-title">Mashhur e'lonlar</h2>
                <div class="listings-grid" id="listingsGrid">
                    <!-- Listings will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </section>

    <!-- Dashboard Section -->
    <section id="dashboardSection" class="main-section dashboard">
        <div class="container">
            <div class="dashboard-header">
                <h2>Foydalanuvchi paneli</h2>
                <div>
                    <span id="userInfo"></span>
                    <button class="btn btn-outline" onclick="logout()">Chiqish</button>
                </div>
            </div>

            <!-- Dashboard Navigation -->
            <div class="dashboard-nav">
                <button class="nav-tab active" onclick="showDashboardTab('profile')">Profil</button>
                <button class="nav-tab" onclick="showDashboardTab('listings')">E'lonlarim</button>
                <button class="nav-tab" onclick="showDashboardTab('favorites')">Tanlanganlar</button>
                <button class="nav-tab" onclick="showDashboardTab('messages')">Xabarlar</button>
            </div>

            <!-- Profile Tab -->
            <div id="profileTab" class="dashboard-content">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number">12</div>
                        <div class="stat-label">Jami e'lonlar</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">247</div>
                        <div class="stat-label">Ko'rishlar</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">8</div>
                        <div class="stat-label">So'rovlar</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">4.8</div>
                        <div class="stat-label">Reyting</div>
                    </div>
                </div>

                <div style="background: white; padding: 2rem; border-radius: 1rem; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                    <h3 style="margin-bottom: 1.5rem;">Profil ma'lumotlari</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Ism Familiya</label>
                            <input type="text" class="form-control" id="fullName" placeholder="To'liq ismingiz">
                        </div>
                        <div class="form-group">
                            <label>Telefon</label>
                            <input type="tel" class="form-control" id="phone" placeholder="+998 XX XXX XX XX">
                        </div>
                        <div class="form-group">
                            <label>Email</label>
                            <input type="email" class="form-control" id="email" placeholder="email@example.com">
                        </div>
                        <div class="form-group">
                            <label>Kompaniya</label>
                            <input type="text" class="form-control" id="company" placeholder="Kompaniya nomi">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Bio</label>
                        <textarea class="form-control textarea" id="bio" placeholder="O'zingiz haqingizda qisqacha..."></textarea>
                    </div>
                    <button class="btn btn-primary">Saqlash</button>
                </div>
            </div>

Shoxruz 2, [9/11/2025 1:46 PM]
<!-- Listings Tab -->
            <div id="listingsTab" class="dashboard-content" style="display: none;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                    <h3>Mening e'lonlarim</h3>
                    <button class="btn btn-primary" onclick="openModal('addListingModal')">+ Yangi e'lon</button>
                </div>
                <div id="userListings">
                    <!-- User listings will be populated by JavaScript -->
                </div>
            </div>

            <!-- Favorites Tab -->
            <div id="favoritesTab" class="dashboard-content" style="display: none;">
                <h3>Saqlangan e'lonlar</h3>
                <div id="favoriteListings">
                    <p>Hozircha saqlangan e'lonlar yo'q</p>
                </div>
            </div>

            <!-- Messages Tab -->
            <div id="messagesTab" class="dashboard-content" style="display: none;">
                <h3>Xabarlar</h3>
                <div id="messagesList">
                    <p>Hozircha xabarlar yo'q</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Kirish</h2>
                <button class="close" onclick="closeModal('loginModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form onsubmit="login(event)">
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" class="form-control" id="loginEmail" required>
                    </div>
                    <div class="form-group">
                        <label>Parol</label>
                        <input type="password" class="form-control" id="loginPassword" required>
                    </div>
                    <button type="submit" class="btn btn-primary" style="width: 100%;">Kirish</button>
                </form>
                <p style="text-align: center; margin-top: 1rem;">
                    Hisob yo'qmi? <a href="#" onclick="closeModal('loginModal'); openModal('registerModal');">Ro'yxatdan o'ting</a>
                </p>
            </div>
        </div>
    </div>

Shoxruz 2, [9/11/2025 1:46 PM]
<!-- Register Modal -->
    <div id="registerModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Ro'yxatdan o'tish</h2>
                <button class="close" onclick="closeModal('registerModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form onsubmit="register(event)">
                    <div class="form-group">
                        <label>Foydalanuvchi turi</label>
                        <select class="form-control" id="userType" required>
                            <option value="">Tanlang</option>
                            <option value="user">Oddiy foydalanuvchi</option>
                            <option value="agent">Makler (Agent)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Ism Familiya</label>
                        <input type="text" class="form-control" id="registerName" required>
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" class="form-control" id="registerEmail" required>
                    </div>
                    <div class="form-group">
                        <label>Telefon</label>
                        <input type="tel" class="form-control" id="registerPhone" required>
                    </div>
                    <div class="form-group">
                        <label>Parol</label>
                        <input type="password" class="form-control" id="registerPassword" required>
                    </div>
                    <button type="submit" class="btn btn-primary" style="width: 100%;">Ro'yxatdan o'tish</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Listing Modal -->
    <div id="addListingModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Yangi e'lon qo'shish</h2>
                <button class="close" onclick="closeModal('addListingModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form onsubmit="addListing(event)">
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Sarlavha</label>
                            <input type="text" class="form-control" id="listingTitle" required>
                        </div>
                        <div class="form-group">
                            <label>Mulk turi</label>
                            <select class="form-control" id="listingType" required>
                                <option value="">Tanlang</option>
                                <option value="apartment">Kvartira</option>
                                <option value="house">Uy</option>
                                <option value="commercial">Tijorat</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Narx (so'm)</label>
                            <input type="number" class="form-control" id="listingPrice" required>
                        </div>
                        <div class="form-group">
                            <label>Xonalar soni</label>
                            <input type="number" class="form-control" id="listingRooms" required>
                        </div>
                        <div class="form-group">
                            <label>Maydon (m¬≤)</label>
                            <input type="number" class="form-control" id="listingArea" required>
                        </div>
                        <div class="form-group">
                            <label>Tuman</label>
                            <select class="form-control" id="listingDistrict" required>
                                <option value="">Tanlang</option>

Shoxruz 2, [9/11/2025 1:46 PM]
<option value="yunusobod">Yunusobod</option>
                                <option value="chilonzor">Chilonzor</option>
                                <option value="shayxontoxur">Shayxontoxur</option>
                                <option value="mirzo-ulugbek">Mirzo Ulug'bek</option>
                                <option value="sergeli">Sergeli</option>
                                <option value="yakkasaroy">Yakkasaroy</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Manzil</label>
                        <input type="text" class="form-control" id="listingAddress" required>
                    </div>
                    <div class="form-group">
                        <label>Tavsif</label>
                        <textarea class="form-control textarea" id="listingDescription" required></textarea>
                    </div>
                    <div class="form-group">
                        <label>Rasmlar</label>
                        <div class="file-input">
                            <input type="file" id="listingImages" multiple accept="image/*" style="display: none;">
                            <p>Rasmlarni yuklash uchun bu yerga bosing yoki sudrab olib keling</p>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary" style="width: 100%;">E'lonni saqlash</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Contact Modal -->
    <div id="contactModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Makler bilan bog'laning</h2>
                <button class="close" onclick="closeModal('contactModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div id="contactInfo">
                    <!-- Contact info will be populated by JavaScript -->
                </div>
                <form onsubmit="sendMessage(event)">
                    <div class="form-group">
                        <label>Xabar</label>
                        <textarea class="form-control textarea" id="contactMessage" placeholder="Xabaringizni yozing..." required></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary" style="width: 100%;">Xabar yuborish</button>
                </form>
            </div>
        </div>
    </div>

Shoxruz 2, [9/11/2025 1:46 PM]
<script>
        // Sample data
        let currentUser = null;
        let listings = [
            {
                id: 1,
                title: "3 xonali kvartira Yunusobodda",
                type: "apartment",
                price: 120000000,
                rooms: 3,
                area: 75,
                district: "yunusobod",
                address: "Yunusobod tumani, 15-mavze",
                description: "Tozalanish bilan, lift mavjud, yaqinida maktab va do'kon",
                images: ["https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?w=400"],
                agent: { name: "Akmal Karimov", phone: "+998 90 123 45 67", email: "akmal@example.com" }
            },
            {
                id: 2,
                title: "Hovlili uy Chilonzorda",
                type: "house",
                price: 250000000,
                rooms: 5,
                area: 180,
                district: "chilonzor",
                address: "Chilonzor tumani, 12-kvartal",
                description: "Katta hovli, garaj, mevali daraxtlar, tinch mahalla",
                images: ["https://images.unsplash.com/photo-1564013799919-ab600027ffc6?w=400"],
                agent: { name: "Sevara Nazarova", phone: "+998 91 234 56 78", email: "sevara@example.com" }
            },
            {
                id: 3,
                title: "2 xonali kvartira Shayxontoxurda",
                type: "apartment",
                price: 85000000,
                rooms: 2,
                area: 55,
                district: "shayxontoxur",
                address: "Shayxontoxur tumani, Beruniy ko'chasi",
                description: "Yangi qurilish, parkga yaqin, transport qulay",
                images: ["https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?w=400"],
                agent: { name: "Bobur Aliev", phone: "+998 93 345 67 89", email: "bobur@example.com" }
            },
            {
                id: 4,
                title: "Tijorat binosi Mirz–æ Ulug'bekda",
                type: "commercial",
                price: 450000000,
                rooms: 8,
                area: 320,
                district: "mirzo-ulugbek",
                address: "Mirzo Ulug'bek tumani, Universitetskaya ko'chasi",
                description: "Ofis uchun ideal, parking mavjud, lift ishlaydi",
                images: ["https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?w=400"],
                agent: { name: "Dilshod Tursunov", phone: "+998 94 456 78 90", email: "dilshod@example.com" }
            }
        ];

        let userListings = [];
        let favorites = [];

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            renderListings();
            setupEventListeners();
        });

        function setupEventListeners() {
            // File input click handler
            document.querySelector('.file-input').onclick = function() {
                document.getElementById('listingImages').click();
            };

            // File input change handler
            document.getElementById('listingImages').onchange = function(e) {
                const files = e.target.files;
                const fileInput = document.querySelector('.file-input p');
                if (files.length > 0) {
                    fileInput.textContent = ${files.length} ta fayl tanlandi;
                }
            };
        }

        // Render listings
        function renderListings(listingsToRender = listings) {
            const grid = document.getElementById('listingsGrid');
            grid.innerHTML = '';

            listingsToRender.forEach(listing => {
                const listingCard = createListingCard(listing);
                grid.appendChild(listingCard);
            });
        }

        function createListingCard(listing) {
            const card = document.createElement('div');
            card.className = 'listing-card fade-in';
            card.onclick = () => openListingDetails(listing);


const typeText = {
                'apartment': 'Kvartira',
                'house': 'Uy', 
                'commercial': 'Tijorat'
            };

            const districtText = {
                'yunusobod': 'Yunusobod',
                'chilonzor': 'Chilonzor',
                'shayxontoxur': 'Shayxontoxur',
                'mirzo-ulugbek': 'Mirzo Ulug\'bek',
                'sergeli': 'Sergeli',
                'yakkasaroy': 'Yakkasaroy'
            };

            card.innerHTML = `
                <div class="listing-image" style="background-image: url('${listing.images[0]}')">
                    <div class="listing-price">${formatPrice(listing.price)} so'm</div>
                </div>
                <div class="listing-content">
                    <div class="listing-title">${listing.title}</div>
                    <div class="listing-location">
                        üìç ${districtText[listing.district]  listing.district}
                    </div>
                    <div class="listing-details">
                        <span>üõè ${listing.rooms} xona</span>
                        <span>üìê ${listing.area} m¬≤</span>
                        <span>üè† ${typeText[listing.type]}</span>
                    </div>
                    <div class="listing-agent">
                        <div class="agent-avatar">${listing.agent.name.charAt(0)}</div>
                        <div>
                            <div style="font-weight: 500;">${listing.agent.name}</div>
                            <div style="font-size: 0.9rem; color: var(--text-light);">Makler</div>
                        </div>
                    </div>
                </div>
            `;

            return card;
        }

        function formatPrice(price) {
            return (price / 1000000).toFixed(1) + ' mln';
        }

        // Modal functions
        function openModal(modalId) {
            document.getElementById(modalId).style.display = 'block';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.style.display = 'none';
            }
        }

        // Authentication
        function login(event) {
            event.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;

            // Simple authentication (in real app, this would be server-side)
            if (email && password) {
                currentUser = {
                    id: 1,
                    name: "Test User",
                    email: email,
                    type: "agent",
                    phone: "+998 90 123 45 67"
                };

                closeModal('loginModal');
                showDashboard();
                showSuccess('Muvaffaqiyatli kirildi!');
            }
        }

        function register(event) {
            event.preventDefault();
            const name = document.getElementById('registerName').value;
            const email = document.getElementById('registerEmail').value;
            const phone = document.getElementById('registerPhone').value;
            const password = document.getElementById('registerPassword').value;
            const userType = document.getElementById('userType').value;

            if (name && email && phone && password && userType) {
                currentUser = {
                    id: Date.now(),
                    name: name,
                    email: email,
                    phone: phone,
                    type: userType
                };

                closeModal('registerModal');
                showDashboard();
                showSuccess('Ro\'yxatdan muvaffaqiyatli o\'tildi!');
            }
        }

        function logout() {
            currentUser = null;
            showSection('home');
            updateAuthButtons(

Shoxruz 2, [9/11/2025 1:46 PM]
);
            showSuccess('Chiqildi!');
        }

        function showDashboard() {
            document.getElementById('homeSection').style.display = 'none';
            document.getElementById('dashboardSection').style.display = 'block';
            updateAuthButtons();
            updateUserInfo();
            populateProfile();
        }

        function showSection(section) {
            if (section === 'home') {
                document.getElementById('homeSection').style.display = 'block';
                document.getElementById('dashboardSection').style.display = 'none';
            }
            updateAuthButtons();
        }

        function updateAuthButtons() {
            const authButtons = document.querySelector('.auth-buttons');
            if (currentUser) {
                authButtons.innerHTML = `
                    <button class="btn btn-outline" onclick="showDashboard()">Dashboard</button>
                    <button class="btn btn-primary" onclick="logout()">Chiqish</button>
                `;
            } else {
                authButtons.innerHTML = `
                    <button class="btn btn-outline" onclick="openModal('loginModal')">Kirish</button>
                    <button class="btn btn-primary" onclick="openModal('registerModal')">Ro'yxatdan o'tish</button>
                `;
            }
        }

        function updateUserInfo() {
            if (currentUser) {
                document.getElementById('userInfo').textContent = currentUser.name;
            }
        }

        function populateProfile() {
            if (currentUser) {
                document.getElementById('fullName').value = currentUser.name  '';
                document.getElementById('phone').value = currentUser.phone  '';
                document.getElementById('email').value = currentUser.email  '';
            }
        }

        // Dashboard functions
        function showDashboardTab(tab) {
            // Hide all tabs
            document.querySelectorAll('.dashboard-content').forEach(content => {
                content.style.display = 'none';
            });

            // Remove active class from all tabs
            document.querySelectorAll('.nav-tab').forEach(navTab => {
                navTab.classList.remove('active');
            });

            // Show selected tab
            document.getElementById(tab + 'Tab').style.display = 'block';
            event.target.classList.add('active');

            // Load tab-specific content
            if (tab === 'listings') {
                renderUserListings();
            } else if (tab === 'favorites') {
                renderFavorites();
            }
        }

        function renderUserListings() {
            const container = document.getElementById('userListings');
            if (userListings.length === 0) {
                container.innerHTML = '<p>Hozircha e\'lonlaringiz yo\'q</p>';
            } else {
                container.innerHTML = '';
                userListings.forEach(listing => {
                    const card = createUserListingCard(listing);
                    container.appendChild(card);
                });
            }
        }

        function createUserListingCard(listing) {
            const card = document.createElement('div');
            card.className = 'listing-card';
            card.style.marginBottom = '1rem';

            const typeText = {
                'apartment': 'Kvartira',
                'house': 'Uy', 
                'commercial': 'Tijorat'
            };

Shoxruz 2, [9/11/2025 1:46 PM]
card.innerHTML = `
                <div class="listing-content">
                    <div style="display: flex; justify-content: space-between; align-items: start;">
                        <div>
                            <div class="listing-title">${listing.title}</div>
                            <div class="listing-location">üìç ${listing.address}</div>
                            <div class="listing-details">
                                <span>üõè ${listing.rooms} xona</span>
                                <span>üìê ${listing.area} m¬≤</span>
                                <span>üè† ${typeText[listing.type]}</span>
                            </div>
                        </div>
                        <div style="text-align: right;">
                            <div style="font-size: 1.2rem; font-weight: bold; color: var(--primary-color);">
                                ${formatPrice(listing.price)} so'm
                            </div>
                            <div style="margin-top: 1rem;">
                                <button class="btn btn-outline" style="margin-right: 0.5rem; padding: 0.5rem 1rem;">Tahrirlash</button>
                                <button class="btn" style="background: var(--error-color); color: white; padding: 0.5rem 1rem;" onclick="deleteListing(${listing.id})">O'chirish</button>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            return card;
        }

        function renderFavorites() {
            const container = document.getElementById('favoriteListings');
            if (favorites.length === 0) {
                container.innerHTML = '<p>Hozircha saqlangan e\'lonlar yo\'q</p>';
            } else {
                container.innerHTML = '';
                const favGrid = document.createElement('div');
                favGrid.className = 'listings-grid';
                favorites.forEach(listing => {
                    const card = createListingCard(listing);
                    favGrid.appendChild(card);
                });
                container.appendChild(favGrid);
            }
        }

        // Search function
        function searchProperties() {
            const type = document.getElementById('propertyType').value;
            const district = document.getElementById('district').value;
            const rooms = document.getElementById('rooms').value;
            const maxPrice = document.getElementById('maxPrice').value;

            let filtered = listings.filter(listing => {
                if (type && listing.type !== type) return false;
                if (district && listing.district !== district) return false;
                if (rooms && listing.rooms.toString() !== rooms) return false;
                if (maxPrice && listing.price > maxPrice * 1000000) return false;
                return true;
            });

            renderListings(filtered);
            
            if (filtered.length === 0) {
                document.getElementById('listingsGrid').innerHTML = `
                    <div style="grid-column: 1/-1; text-align: center; padding: 2rem;">
                        <h3>Hech narsa topilmadi</h3>
                        <p>Qidiruv shartlarini o'zgartirib ko'ring</p>
                    </div>
                `;
            }
        }

        // Add listing function
        function addListing(event) {
            event.preventDefault();

            if (!currentUser || currentUser.type !== 'agent') {
                showError('Faqat maklerlar e\'lon qo\'sha oladi');
                return;
            }

Shoxruz 2, [9/11/2025 1:46 PM]
const title = document.getElementById('listingTitle').value;
            const type = document.getElementById('listingType').value;
            const price = parseInt(document.getElementById('listingPrice').value);
            const rooms = parseInt(document.getElementById('listingRooms').value);
            const area = parseInt(document.getElementById('listingArea').value);
            const district = document.getElementById('listingDistrict').value;
            const address = document.getElementById('listingAddress').value;
            const description = document.getElementById('listingDescription').value;

            const newListing = {
                id: Date.now(),
                title,
                type,
                price,
                rooms,
                area,
                district,
                address,
                description,
                images: ["https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?w=400"], // Default image
                agent: {
                    name: currentUser.name,
                    phone: currentUser.phone,
                    email: currentUser.email
                }
            };

            userListings.push(newListing);
            listings.push(newListing);

            closeModal('addListingModal');
            document.getElementById('addListingModal').querySelector('form').reset();
            showSuccess('E\'lon muvaffaqiyatli qo\'shildi!');
            
            if (document.getElementById('listingsTab').style.display !== 'none') {
                renderUserListings();
            }
            renderListings();
        }

        function deleteListing(id) {
            if (confirm('E\'lonni o\'chirishga ishonchingiz komilmi?')) {
                userListings = userListings.filter(l => l.id !== id);
                listings = listings.filter(l => l.id !== id);
                renderUserListings();
                renderListings();
                showSuccess('E\'lon o\'chirildi');
            }
        }

        // Listing details
        function openListingDetails(listing) {
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.style.display = 'block';
            
            const districtText = {
                'yunusobod': 'Yunusobod',
                'chilonzor': 'Chilonzor',
                'shayxontoxur': 'Shayxontoxur',
                'mirzo-ulugbek': 'Mirzo Ulug\'bek',
                'sergeli': 'Sergeli',
                'yakkasaroy': 'Yakkasaroy'
            };

            const typeText = {
                'apartment': 'Kvartira',
                'house': 'Uy', 
                'commercial': 'Tijorat'
            };

Shoxruz 2, [9/11/2025 1:46 PM]
modal.innerHTML = `
                <div class="modal-content">
                    <div class="modal-header">
                        <h2 class="modal-title">${listing.title}</h2>
                        <button class="close" onclick="this.closest('.modal').remove()">&times;</button>
                    </div>
                    <div class="modal-body">
                        <div style="margin-bottom: 2rem;">
                            <img src="${listing.images[0]}" alt="${listing.title}" 
                                 style="width: 100%; height: 300px; object-fit: cover; border-radius: 0.5rem;">
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-bottom: 2rem;">
                            <div>
                                <h3>Ma'lumotlar</h3>
                                <div style="margin-top: 1rem;">
                                    <p><strong>Narx:</strong> ${formatPrice(listing.price)} so'm</p>
                                    <p><strong>Turi:</strong> ${typeText[listing.type]}</p>
                                    <p><strong>Xonalar:</strong> ${listing.rooms}</p>
                                    <p><strong>Maydon:</strong> ${listing.area} m¬≤</p>
                                    <p><strong>Tuman:</strong> ${districtText[listing.district]}</p>
                                    <p><strong>Manzil:</strong> ${listing.address}</p>
                                </div>
                            </div>
                            
                            <div>
                                <h3>Makler</h3>
                                <div style="margin-top: 1rem;">
                                    <div class="listing-agent">
                                        <div class="agent-avatar">${listing.agent.name.charAt(0)}</div>
                                        <div>
                                            <div style="font-weight: 500;">${listing.agent.name}</div>
                                            <div style="font-size: 0.9rem; color: var(--text-light);">${listing.agent.phone}</div>
                                        </div>
                                    </div>
                                    <div style="margin-top: 1rem;">
                                        <button class="btn btn-primary" style="width: 100%; margin-bottom: 0.5rem;" 
                                                onclick="contactAgent(${listing.id})">Bog'lanish</button>
                                        <button class="btn btn-outline" style="width: 100%;" 
                                                onclick="toggleFavorite(${listing.id})">Saqlash</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div>
                            <h3>Tavsif</h3>
                            <p style="margin-top: 1rem; line-height: 1.6;">${listing.description}</p>
                        </div>
                    </div>
                </div>
            `;

            document.body.appendChild(modal);
        }

        function contactAgent(listingId) {
            const listing = listings.find(l => l.id === listingId);
            if (!listing) return;

            // Close listing details modal
            document.querySelector('.modal').remove();

            // Open contact modal
            document.getElementById('contactInfo').innerHTML = `
                <div style="background: var(--secondary-color); padding: 1rem; border-radius: 0.5rem; margin-bottom: 1rem;">
                    <h4>${listing.agent.name}</h4>
                    <p>üìû ${listing.agent.phone}</p>
                    <p>‚úâÔ∏è ${listing.agent.email}</p>
                    <p><strong>E'lon:</strong> ${listing.title}</p>
                </div>
            `;
            
            openModal('contactModal');
        }

Shoxruz 2, [9/11/2025 1:46 PM]
function sendMessage(event) {
            event.preventDefault();
            const message = document.getElementById('contactMessage').value;
            
            if (message.trim()) {
                showSuccess('Xabar yuborildi! Makler tez orada siz bilan bog\'lanadi.');
                closeModal('contactModal');
                document.getElementById('contactMessage').value = '';
            }
        }

        function toggleFavorite(listingId) {
            const listing = listings.find(l => l.id === listingId);
            if (!listing) return;

            const index = favorites.findIndex(f => f.id === listingId);
            if (index > -1) {
                favorites.splice(index, 1);
                showSuccess('Sevimlilardan olib tashlandi');
            } else {
                favorites.push(listing);
                showSuccess('Sevimlilarga qo\'shildi');
            }
        }

        // Utility functions
        function showSuccess(message) {
            const alert = document.createElement('div');
            alert.className = 'success-message';
            alert.textContent = message;
            alert.style.position = 'fixed';
            alert.style.top = '20px';
            alert.style.right = '20px';
            alert.style.zIndex = '1001';
            alert.style.minWidth = '300px';
            
            document.body.appendChild(alert);
            
            setTimeout(() => {
                alert.remove();
            }, 3000);
        }

        function showError(message) {
            const alert = document.createElement('div');
            alert.className = 'error-message';
            alert.textContent = message;
            alert.style.position = 'fixed';
            alert.style.top = '20px';
            alert.style.right = '20px';
            alert.style.zIndex = '1001';
            alert.style.minWidth = '300px';
            
            document.body.appendChild(alert);
            
            setTimeout(() => {
                alert.remove();
            }, 3000);
        }

        // Initialize on load
        window.onload = function() {
            renderListings();
        };
    </script>
</body>
</html>